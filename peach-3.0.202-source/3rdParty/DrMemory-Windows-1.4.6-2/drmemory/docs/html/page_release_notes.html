<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Dr. Memory: Release Notes for Version 1.4.6</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
</head><body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="contents">


<h1><a class="anchor" id="page_release_notes">Release Notes for Version 1.4.6 </a></h1><p>This section is divided into the following subsections:</p>
<ul>
<li><a class="el" href="page_release_notes.html#sec_package">Distribution Contents</a></li>
<li><a class="el" href="page_release_notes.html#sec_changes">Changes Since Prior Releases</a></li>
<li><a class="el" href="page_release_notes.html#sec_limits">Limitations</a></li>
</ul>
 
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
 <h2><a class="anchor" id="sec_package">
Distribution Contents</a></h2>
<p>The Dr. Memory distribution contains the following:</p>
<ul>
<li>The front-end script to launch Dr. Memory: <code>drmemory.pl</code> on Linux and Cygwin, <code>drmemory.exe</code> on Windows.</li>
<li>The back-end of Dr. Memory, contained in the <code>bin32</code> and <code>dynamorio</code> subdirectories. Dr. Memory runs on top of the DynamoRIO tool engine (see <a href="http://dynamorio.org">http://dynamorio.org</a> for more information on DynamoRIO).</li>
<li>Documentation for Dr. Memory (you're looking at it).</li>
</ul>
 
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
 <h2><a class="anchor" id="sec_changes">
Changes Since Prior Releases</a></h2>
<p>The current version is 1.4.6. The changes between version 1.4.6 and 1.4.5 include:</p>
<ul>
<li>Added MinGW support</li>
<li>Added -pause_at_error option</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.4.5 and 1.4.4 include:</p>
<ul>
<li>The tool now detects mismatched use of malloc/new/new[] vs free/delete/delete[]</li>
<li>Added a script to convert Memcheck suppression files to the Dr. Memory format.</li>
<li>Performance improvements on large applications via a symbol cache</li>
<li>Renamed the -check_cmps option to -check_uninit_cmps</li>
<li>Renamed the -check_non_moves option to -check_uninit_non_moves</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.4.4 and 1.4.3 include:</p>
<ul>
<li>Fix for missing output in cmd on Win7 SP1</li>
<li>Check for /MDd and abort</li>
</ul>
<p>The changes between version 1.4.3 and 1.4.2 include:</p>
<ul>
<li>Changed the default callstack printing style and added control over the style via the -callstack_style runtime option</li>
<li>On Windows, printing errors to stderr is now on by default</li>
<li>On Windows, several options now control simplifying callstacks: -callstack_truncate_below, -callstack_srcfile_prefix, -callstack_modname_hide, -callstack_srcfile_hide. The -brief option sets these to common defaults and hides absolute addresses for simpler reports.</li>
<li>Callstack walking in presence of FPO is now supported.</li>
<li>Added a new mode that is several times faster but does not check for uninitialized reads: -no_check_uninitialized.</li>
<li>Thread creation stack traces are now available in the global.pid.log file for identifying threads.</li>
<li>Suppressions can take names, and the list of used suppressions is printed out in the results file.</li>
<li>Increased default -redzone_size to 16</li>
<li>Suppression can take instruction specifiers for narrower scope.</li>
<li>The Valgrind Memcheck suppression format is supported for legacy suppression files: however, C++ symbols must be de-mangled at this time.</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.4.2 and 1.4.1 include:</p>
<ul>
<li>Initial graphical system call support to reduce false positives</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.4.1 and 1.4.0 include:</p>
<ul>
<li>Full Windows 7 support</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.4.0 and 1.3.1 include:</p>
<ul>
<li>Initial Windows 7 support</li>
<li>Performance improvements</li>
<li>Various bug fixes</li>
<li>Release build is used by default</li>
</ul>
<p>The changes between version 1.3.1 and 1.3.0 include:</p>
<ul>
<li>Performance improvements</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.3.0 and 1.2.1 include:</p>
<ul>
<li>Enabled -check_leaks and -possible_leaks by default (Issue 8)</li>
<li>Improved suppression support: support for vertical wildcards "..."</li>
<li>Locate target app on path on Linux (Issue 33)</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.2.1 and 1.2.0 include:</p>
<ul>
<li>Fix bug in symbol lookup causing debug build asserts</li>
</ul>
<p>The changes between version 1.2.0 and 1.1.0 include:</p>
<ul>
<li>Avoid false positives and false negatives when using debug versions of msvcrt, whose own debugging facilities conflicted with Dr. Memory's</li>
<li>Added -perturb feature that uses random delays to attempt to trigger data races such as use-after-free accesses, which Dr. Memory will immediately detect</li>
<li>Separate indirect leaks from direct leaks</li>
<li>Added -version option to front end</li>
<li>Generalized "invalid free" to "invalid heap argument"</li>
<li>Improved performance of many instruction types including string instructions</li>
<li>Improved performance of heap routines accessing heap headers</li>
<li>Improved performance of stack adjustments</li>
<li>Improved performance of shadow table accesses</li>
<li>Improved performance of hashtables via dynamic resizing</li>
<li>Display messages in cmd window, where DynamoRIO has trouble printing</li>
<li>Switch to online symbol processing on Windows, greatly simplifying the Windows design and making it more robust by eliminating perl entirely</li>
<li>Eliminate need for admin privileges to run on Windows</li>
<li>Added wildcard support to suppressions</li>
<li>Various bug fixes</li>
</ul>
<p>The changes between version 1.1.0 and 1.0.1 include:</p>
<ul>
<li>Eliminated common C++ cases of false positives in possible leaks</li>
<li>Report additional information on unaddressable errors: list the nearest malloc chunks above and below, and whether the access was to freed memory</li>
<li>Report timestamp and thread id of reported errors</li>
<li>Added -leaks_only feature for low-overhead leak checking</li>
<li>Improved support for heaps used as stacks when such stacks are small and are adjacent to non-stack data</li>
<li>Improved Linux system call parameter handling to reduce false positives</li>
<li>Added default suppression file</li>
<li>Added -aggregate option to combine error listings and eliminate duplicates among a set of processes</li>
<li>Report the total number of leaked bytes</li>
<li>Perform error duplication checks in the client</li>
<li>Reduce memory usage of callstacks stored on each malloc</li>
<li>Eliminate false positives from libc string routines by replacing them</li>
<li>Switch to true reachability-based leak detection, trigger-able from a nudge at any time during a run</li>
<li>Split possible leaks from certain leaks</li>
<li>Improved documentation</li>
<li>Improve performance of consecutive similar memory references</li>
<li>Improve performance of 64K-boundary-crossing stack adjustments</li>
<li>Many other performance improvements</li>
<li>Many bug fixes</li>
</ul>
 
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
 <h2><a class="anchor" id="sec_limits">
Limitations</a></h2>
<p>This is a Beta version. It has some missing features and undoubtedly some bugs. The missing features include:</p>
<ul>
<li>Windows system call parameters are not all known, which can result in false positives and false negatives, especially on Vista or Windows 7, or with code that interacts with the network.</li>
<li>The malloc in the Cygwin C library is not yet tracked separately from the Windows API malloc which can lead to false negatives.</li>
<li>Definedness is tracked at the byte level, not at the bit level, which when bitfields are in use can lead to false positives.</li>
<li>64-bit support: we plan to add this in the future.</li>
<li>32-bit applications on 64-bit Windows have some limitations (these are actually limitations of the current version of the underlying DynamoRIO engine): if the app creates threads prior to image entry (as cygwin apps often do) and does not link user32.dll, Dr. Memory will not take over early enough to avoid problems with the other thread(s). On 32-bit Windows this can be worked around by taking over from a parent process (e.g., cmd.exe). Instructions on how to do this will appear in an upcoming version (basically you need to use DynamoRIO's drdeploy to set up the child; in the future the drmemory front-end will support doing that for you).</li>
<li>Detecting mixing of malloc/new/new[] vs free/delete/delete[]: though if the deleted class has its own allocated memory it should show up as a reported memory leak; and if it doesn't, and its destructor doesn't do anything else, then no harm done by not calling delete[].</li>
<li>Multiple thread corner cases:<ul>
<li>Pathological races between mallocs and frees can result in Dr. Memory's shadow memory structures becoming mis-aligned with subsequent false positives. However, such a scenario will always be preceded by an invalid free error.</li>
<li>General races between memory accesses and Dr. Memory's shadow memory can occur but errors will only occur with the presence of erroneous race conditions in the application.</li>
<li>This release can produce false positives if multiple threads write to adjacent bytes simultaneously. Future releases will provide options to trade off performance, memory usage, and accuracy. </li>
</ul>
</li>
</ul>
</div>
<br>&nbsp;
<table width=100% bgcolor="#000000" cellspacing=0 cellpadding=2 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td><table width=100% bgcolor="#0000C0" cellspacing=0 cellpadding=1 border=0>
  <tr><td></td></tr></table></td></tr></table></td></tr></table>
<address style="text-align: center;"><small>
<br>
<img border=0 src="favicon.png"> &nbsp; Dr. Memory version 1.4.6 --- Wed Mar 7 10:13:50 2012 
&nbsp; <img border=0 src="favicon.png">
</body>
</html>
